(this["webpackJsonpfour-in-a-row-react"]=this["webpackJsonpfour-in-a-row-react"]||[]).push([[0],{154:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(10),o=n.n(i),s=(n(93),n(22)),u=n(8),c=n(9),l=n(13),h=n(14),m=n(15),d=n(31),g=n(5),p=n.n(g),f=n(21),v=function(){function e(){Object(u.a)(this,e)}return Object(c.a)(e,null,[{key:"formSeries",value:function(e,t){var n=p.a.flatten(p.a.range(e).map((function(e){return p.a.range(t-3).map((function(t){return p.a.range(4).map((function(n){return{x:e,y:t+n}}))}))}))),a=p.a.flatten(p.a.range(t).map((function(t){return p.a.range(e-3).map((function(e){return p.a.range(4).map((function(n){return{x:e+n,y:t}}))}))}))),r=p.a.flatten(p.a.range(0,t-3).map((function(t){return p.a.range(e-3).map((function(e){return p.a.range(4).map((function(n){return{x:e+n,y:t+n}}))}))}))),i=p.a.flatten(p.a.range(0,t-3).map((function(t){return p.a.range(e-3).map((function(e){return p.a.range(4).map((function(n){return{x:e+n,y:3+t-n}}))}))})));return[].concat(Object(f.a)(n),Object(f.a)(a),Object(f.a)(r),Object(f.a)(i))}},{key:"stringifyCell",value:function(e){return"".concat(e.x,",").concat(e.y)}},{key:"getLastCellAsString",value:function(e,t){var n=t,a=e[t].length-1;return"".concat(n,",").concat(a)}}]),e}(),y=n(87),k=n(3),b=["Give me your best shot!","you like that?","Failed to see this coming, ha?","Come on, show me what you got!"],C=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(l.a)(this,Object(h.a)(t).call(this,e))).boardRange=p.a.range(n.board.length),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"takeStep",value:function(){this.win()||this.blockLose()||this.have2WaysToWin()||this.block2WaysToLose()||this.takeSmartStep()}},{key:"takeSmartStep",value:function(){var e=this.getBestChoise();this.appendToColumn(e,this.mark),this.message=p.a.sample(b)}},{key:"getBestChoise",value:function(){var e=this,t=this.getScoreForPosition(this.aiLevel,this.mark,!0);return p.a.maxBy(p.a.range(this.board.length).filter((function(t){return e.board[t].length<e.maxHeight})),(function(e){return t[e]}))}},{key:"getScoreForPosition",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[],i=p.a.range(this.board.length).map((function(e){return n.wrapFillColumnTemp(e,t,(function(){var t=v.getLastCellAsString(n.board,e);if(n.won(t))return 1;if(n.lost(t))return-1;var a=n.stateScore();return r[e]=a,0}))})),o=[].concat(r).sort((function(e,a){return t===n.mark?a-e:e-a})).slice(0,4),s=i.map((function(a,i){return n.wrapFillColumnTemp(i,t,(function(){return 1===a?n.factor(e):-1===a?-n.factor(e):1===e?r[i]:o.includes(r[i])?n.getScoreForPosition(e-1,n.toggleMark(t)):-1/0}))}));return a?s:p.a.sum(s.filter((function(e){return e!==-1/0})))}},{key:"stateScore",value:function(){var e=this;return p.a.sumBy(this.series.filter((function(t){return t[e.mark]>0&&0===t[e.opponentMark]})),(function(t){return t[e.mark]}))-p.a.sumBy(this.series.filter((function(t){return 0===t[e.mark]&&t[e.opponentMark]>0})),(function(t){return t[e.opponentMark]}))}},{key:"everyStepMatching",value:function(e,t){var n=this;return this.boardRange.every((function(a){if(n.board[a].length===n.maxHeight)return!0;n.appendToColumn(a,e);var r=t();return n.removeFromColumn(a,e),r}))}},{key:"findStepMatching",value:function(e,t){var n=this;return this.boardRange.find((function(a){if(n.board[a].length===n.maxHeight)return!1;n.appendToColumn(a,e);var r=t();return n.removeFromColumn(a,e),r}))}},{key:"findStepsMatching",value:function(e,t){var n=this;return this.boardRange.filter((function(a){if(n.board[a].length===n.maxHeight)return!1;n.appendToColumn(a,e);var r=t();return n.removeFromColumn(a,e),r}))}},{key:"canWinCell",value:function(){var e=this;return this.findStepMatching(this.mark,(function(){return e.won()}))}},{key:"canWin",value:function(){return void 0!==this.canWinCell()}},{key:"canLoseCell",value:function(){var e=this;return this.findStepMatching(this.opponentMark,(function(){return e.lost()}))}},{key:"canLose",value:function(){return void 0!==this.canLoseCell()}},{key:"win",value:function(){var e=this.canWinCell();return void 0!==e&&(this.appendToColumn(e,this.mark),this.message="Got ya!"),void 0!==e}},{key:"blockLose",value:function(){var e=this.canLoseCell();return void 0!==e&&(this.appendToColumn(e,this.mark),this.message="Blocked ya!"),void 0!==e}},{key:"have2WaysToWin",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=this.findStepMatching(this.mark,(function(){return!e.canLose()&&e.everyStepMatching(e.opponentMark,(function(){return e.canWin()}))}));return void 0!==n&&t&&(this.appendToColumn(n,this.mark),this.message="Got ya in 2 ways!"),void 0!==n}},{key:"onSwitchedMarks",value:function(e){var t=[this.opponentMark,this.mark];this.mark=t[0],this.opponentMark=t[1];var n=e(),a=[this.opponentMark,this.mark];return this.mark=a[0],this.opponentMark=a[1],n}},{key:"block2WaysToLose",value:function(){return!1}}]),t}(function(){function e(t){var n=this;Object(u.a)(this,e);var a=t.boardColumns,r=t.board,i=t.boardRows,o=t.aiMark,s=t.opponentMark,c=t.aiLevel,l=t.refs;if(this.board=r||p.a.range(a).map((function(e){return[]})),this.maxHeight=i,this.mark=o,this.opponentMark=s,this.aiLevel=c,l)Object.assign(this,l);else{var h,m=v.formSeries(this.board.length,this.maxHeight),d=(h={},Object(k.a)(h,this.mark,0),Object(k.a)(h,this.opponentMark,0),h),g=new Map(m.map((function(e){return[e,Object.assign({},d,p.a.countBy(e,(function(e){return n.board[e.x][e.y]})))]})));this.series=m.map((function(e){return g.get(e)})),this.seriesByCell=p.a.range(4).map((function(e){return p.a.groupBy(m,(function(t){return v.stringifyCell(t[e])}))})).map((function(e){return p.a.fromPairs(p.a.toPairs(e).map((function(e){var t=Object(y.a)(e,2);return[t[0],t[1].map((function(e){return g.get(e)}))]})))})).reduce((function(e,t){return Object.keys(t).forEach((function(n){var a;n in e?(a=e[n]).push.apply(a,Object(f.a)(t[n])):e[n]=t[n]})),e}),{})}this.factor=function(e){return Math.pow(e,n.board.length)*n.series.length*4}}return Object(c.a)(e,[{key:"appendToColumn",value:function(e,t){this.board[e].push(t),this.lastColumn=e,this.seriesByCell[v.getLastCellAsString(this.board,e)].forEach((function(e){return e[t]++}))}},{key:"removeFromColumn",value:function(e,t){this.seriesByCell[v.getLastCellAsString(this.board,e)].forEach((function(e){return e[t]--})),this.board[e].pop()}},{key:"isTie",value:function(){var e=this;return this.board.every((function(t){return t.length===e.maxHeight}))}},{key:"won",value:function(e){return this.wonByMark(e,this.mark)}},{key:"lost",value:function(e){return this.wonByMark(e,this.opponentMark)}},{key:"wonByMark",value:function(e,t){return e?this.seriesByCell[e].some((function(e){return 4===e[t]})):this.series.some((function(e){return 4===e[t]}))}},{key:"wrapFillColumnTemp",value:function(e,t,n){if(this.board[e].length===this.maxHeight)return 0;this.appendToColumn(e,t);var a=n();return this.removeFromColumn(e,t),a}},{key:"toggleMark",value:function(e){return e===this.mark?this.opponentMark:this.mark}}]),e}()),w=1,x=2,M={messageBoxHeightArithmetic:"".concat(10,"px + 2vmin"),messageBoxFontArithmetic:"".concat(5,"px + 2vmin")};d.a.div.withConfig({displayName:"Board",componentId:"i3xyz9-0"})(["width:calc(100% - ","px),height:calc(100% - ","px - (",")),backgroundColor:#7f7878,display:grid,gridTemplateColumns:repeat(7,1fr),gridTemplateRows:repeat(7,1fr),gridRowGap:10,gridColumnGap:10,padding:",""],20,20,M.messageBoxHeightArithmetic,10);var j=1,S=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(l.a)(this,Object(h.a)(t).call(this,e))).state={currentPlayer:j},n.setup(),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"setup",value:function(){var e=this.props,t=e.meta,n=e.board;this.firstMark="x",this.secondMark="o",this.meta=t;var a={board:n||p.a.range(7).map((function(e){return[]})),boardColumns:7,boardRows:6};this.engineFirst=new C(Object(s.a)({},a,{opponentMark:this.secondMark,aiMark:this.firstMark,aiLevel:t.first.level})),this.engineSecond=new C(Object(s.a)({},a,{opponentMark:this.firstMark,aiMark:this.secondMark,aiLevel:t.second.level,refs:{series:this.engineFirst.series,seriesByCell:this.engineFirst.seriesByCell}})),window.engine=this.engineSecond,window._=p.a,window.userSteps=this.userSteps=[],this.height=a.boardRows,this.board=this.engineFirst.board,this.width=a.boardColumns,this.state={currentPlayer:j}}},{key:"render",value:function(){var e=this;this.meta!==this.props.meta&&this.restart();var t=!1;return this.currentEngine.lost()?(console.log("Player ".concat(this.nextPlayer()," Won!")),t=!0):this.currentEngine.isTie()?(console.log("It's a Tie!"),t=!0):this.isCurrentPlayerType(w)&&setTimeout((function(){e.currentEngine.takeStep(),e.setState({currentPlayer:e.nextPlayer()}),e.props.onMessage(e.nextEngine.message)}),0),r.a.createElement("div",{style:{width:"calc(100% - 20px)",height:"calc(100% - 20px - 15px - 2vmin)",backgroundColor:"#7f7878",display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gridTemplateRows:"repeat(7, 1fr)",gridRowGap:10,gridColumnGap:10,padding:10}},p.a.rangeRight(this.height).map((function(t){return e.board.map((function(e){return function(e){var t="x"===e?"red":"blue";return r.a.createElement("div",{key:p.a.random(1e9),style:{border:e?"0.9vw solid ".concat(t):"none",borderRadius:"100%",background:e?"x"===e?"radial-gradient(circle, red 60%,transparent 100%)":"radial-gradient(circle, blue 60%, violet 90%)":"gray"}})}(e[t])}))})).flat(),p.a.range(this.width).map((function(n){return e.button(n,t,e.nextEngine.lastColumn===n)})))}},{key:"restart",value:function(){this.setup()}},{key:"isCurrentPlayerType",value:function(e){return this.state.currentPlayer===j?this.meta.first.type===e:this.meta.second.type===e}},{key:"button",value:function(e,t,n){var a=this,i="x"===this.currentMark?"blue":"red";return r.a.createElement("button",{style:{borderRadius:"10px",background:t?"repeating-linear-gradient(45deg, black, ".concat(i," 100%)"):n?"repeating-linear-gradient(45deg, ".concat(i,", transparent 100%)"):"repeating-linear-gradient(45deg, black, transparent 100%)",color:"white",fontWeight:"bold",fontSize:"2.7vw"},key:e,onClick:function(){!t&&a.board[e].length<a.height&&a.isCurrentPlayerType(x)&&(a.userSteps.push(e),a.currentEngine.appendToColumn(e,a.currentMark),a.setState({currentPlayer:a.nextPlayer()}))}},e+1)}},{key:"nextPlayer",value:function(){return 3-this.state.currentPlayer}},{key:"currentEngine",get:function(){return this.state.currentPlayer===j?this.engineFirst:this.engineSecond}},{key:"nextEngine",get:function(){return this.state.currentPlayer===j?this.engineSecond:this.engineFirst}},{key:"currentMark",get:function(){return this.state.currentPlayer===j?this.firstMark:this.secondMark}}]),t}(r.a.Component);var O=n(86),E=n(85),B=(n(153),[{value:x,label:"Human"},{value:w,label:"AI"}]);function T(e){var t=e.children;return r.a.createElement("div",{style:{minWidth:120}},t)}function P(e){var t=e.children;return r.a.createElement("div",{style:{minWidth:200,color:"black"}},t)}function F(e){var t=e.children;return r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},t)}function L(e){var t=e.data,n=e.turn,a=e.onChange,i=B.find((function(e){return e.value===t.type}));return r.a.createElement("div",{style:{textAlign:"left",padding:20,fontFamily:"arial"}},r.a.createElement(F,null,r.a.createElement(T,null,r.a.createElement("span",null,n+" Player:")),r.a.createElement(P,null,r.a.createElement(O.a,{value:i,onChange:function(e){return a({type:e.value,level:t.level||7})},options:B}))),i.value===w&&r.a.createElement("div",{style:{paddingTop:10}},r.a.createElement(F,null,r.a.createElement(T,null,r.a.createElement("label",null,"Level: ")),r.a.createElement(P,null,r.a.createElement(E.a,{min:1,max:8,value:t.level||7,dots:!0,onChange:function(e){return a({type:t.type,level:e})}})))))}var R=function(e){function t(e){var n;Object(u.a)(this,t);var a=(n=Object(l.a)(this,Object(h.a)(t).call(this,e))).props,r=a.first,i=a.second;return n.state={first:r,second:i},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.first,a=t.second,i=this.props,o=i.onChange,u=i.onRestart;return r.a.createElement("div",{style:{margin:20,backgroundColor:"#7f7878",display:"grid",gridTemplateColumns:"min-content",borderRadius:"30px",color:"white",fontWeight:"bold"}},r.a.createElement(L,{data:n,turn:"First",onChange:function(t){return e.setState(Object(s.a)({},e.state,{first:t}))&&o({first:t,second:a})}}),r.a.createElement(L,{data:a,turn:"Second",onChange:function(t){return e.setState(Object(s.a)({},e.state,{second:t}))&&o({first:n,second:t})}}),r.a.createElement("button",{style:{margin:20,paddingTop:10,paddingBottom:10,fontSize:25,fontFamily:"arial",fontWeight:"bold",color:"white",background:"repeating-linear-gradient(45deg, transparent, black, transparent 100%)",borderRadius:15},onClick:function(){return u(Object(s.a)({},e.state))}},"Restart"))}}]),t}(r.a.Component),W=d.a.div.withConfig({displayName:"PlayGameStyled__PlayGameContianer",componentId:"sc-18jymkw-0"})(["text-align:center;margin:auto;background-color:#282c34;min-height:100vh;max-height:100vh;min-width:100vw;display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;justify-content:center;"]),A=d.a.div.withConfig({displayName:"PlayGameStyled__MessageAndBoardContainer",componentId:"sc-18jymkw-1"})(["width:",";height:calc("," + ",");min-width:",";min-height:calc("," + ",");max-width:",";max-height:calc("," + ",");padding:10px;"],"40vmax","40vmax",M.messageBoxHeightArithmetic,"300px","300px",M.messageBoxHeightArithmetic,"600px","600px",M.messageBoxHeightArithmetic),H=d.a.div.withConfig({displayName:"PlayGameStyled__MessageBox",componentId:"sc-18jymkw-2"})(["padding:10px 0;width:100%;font-size:calc(",");min-height:calc(",");"],M.messageBoxFontArithmetic,M.messageBoxHeightArithmetic),G=d.a.p.withConfig({displayName:"PlayGameStyled__Message",componentId:"sc-18jymkw-3"})(["margin:0 0;color:white;font-weight:bold;min-height:calc(",");"],M.messageBoxFontArithmetic),I=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={meta:{first:{type:x},second:{type:w,level:7}},message:""},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.message,a=t.meta;return r.a.createElement(W,null,r.a.createElement(A,null,r.a.createElement(H,null,r.a.createElement(G,null,n)),r.a.createElement(S,{meta:a,onMessage:function(t){return e.atLeastOneHumanPlayer()&&e.setState(Object(s.a)({},e.state,{message:t}))}})),r.a.createElement(R,{first:a.first,second:a.second,onChange:function(e){},onRestart:function(t){return e.setState({meta:t,message:null})}}))}},{key:"atLeastOneHumanPlayer",value:function(){var e=this.state.meta,t=e.first,n=e.second;return t.type===x||n.type===x}}]),t}(r.a.Component);var _=function(){return r.a.createElement(I,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(_,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},88:function(e,t,n){e.exports=n(154)},93:function(e,t,n){}},[[88,1,2]]]);
//# sourceMappingURL=main.7b0ffcf0.chunk.js.map